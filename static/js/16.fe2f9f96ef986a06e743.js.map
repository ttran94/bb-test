{"version":3,"sources":["webpack:///static/js/16.fe2f9f96ef986a06e743.js","webpack:///./src/components/user/profile/update-photo/update-photo.vue","webpack:///update-photo.vue","webpack:///./src/components/user/profile/update-photo/update-photo.vue?0528","webpack:///./src/components/user/profile/update-photo/update-photo.vue?fbad","webpack:///./src/components/user/profile/update-photo/update-photo.vue?ed4c"],"names":["webpackJsonp","329","module","exports","__webpack_require__","Component","387","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_vueFire","_vueFire2","_elementUi","_lodash","_lodash2","data","tab","dialogVisible","imageUrl","file","url","mounted","this","$ga","trackPage","$route","path","methods","setTab","id","onClose","$router","push","name","onFileSelected","uploadLocal","_this","isEmpty","Message","showClose","message","type","user","auth","currentUser","updateProfile","photoURL","then","$store","dispatch","storageRef","db","ref","put","image","getDownloadURL","626","version","sources","names","mappings","sourceRoot","664","content","locals","716","render","_vm","_h","$createElement","_c","_self","attrs","size","show-close","on","close","model","callback","$$v","expression","slot","staticClass","to","_v","_t","staticStyle","padding-top","href","data-toggle","click","$event","role","placeholder","disabled","action","show-upload-list","multiple","before-upload","color","margin-top","staticRenderFns"],"mappings":"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","file":"static/js/16.fe2f9f96ef986a06e743.js","sourcesContent":["webpackJsonp([16,20],{\n\n/***/ 329:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(664)\n\t\n\tvar Component = __webpack_require__(3)(\n\t  /* script */\n\t  __webpack_require__(387),\n\t  /* template */\n\t  __webpack_require__(716),\n\t  /* scopeId */\n\t  null,\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 387:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _vueFire = __webpack_require__(127);\n\t\n\tvar _vueFire2 = _interopRequireDefault(_vueFire);\n\t\n\tvar _elementUi = __webpack_require__(159);\n\t\n\tvar _lodash = __webpack_require__(134);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  data: function data() {\n\t    return {\n\t      tab: 0,\n\t      dialogVisible: true,\n\t      imageUrl: '',\n\t      file: {\n\t        url: '',\n\t        obj: null\n\t      }\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    this.$ga.trackPage(this.$route.path);\n\t  },\n\t\n\t  methods: {\n\t    setTab: function setTab(id) {\n\t      this.tab = id;\n\t    },\n\t    onClose: function onClose() {\n\t      this.file = {};\n\t      this.$router.push({ name: 'UserProfile' });\n\t    },\n\t    onFileSelected: function onFileSelected(file) {\n\t      this.file.obj = file;\n\t      this.file.url = file.name;\n\t      return false;\n\t    },\n\t    uploadLocal: function uploadLocal() {\n\t      var _this = this;\n\t\n\t      if (this.tab) {\n\t        if (!_lodash2.default.isEmpty(this.imageUrl)) {\n\t          var user = _vueFire2.default.auth().currentUser;\n\t          user.updateProfile({\n\t            photoURL: this.imageUrl\n\t          }).then(function () {\n\t            (0, _elementUi.Message)({\n\t              showClose: true,\n\t              message: 'Your Photo has been successfully updated.',\n\t              type: 'success'\n\t            });\n\t            _this.$store.dispatch('setUser', user);\n\t            _this.$router.push({\n\t              name: 'UserProfile'\n\t            });\n\t          }, function () {\n\t            (0, _elementUi.Message)({\n\t              showClose: true,\n\t              message: 'There was an error when trying to update your Photo.',\n\t              type: 'error'\n\t            });\n\t          });\n\t        } else {\n\t          (0, _elementUi.Message)({\n\t            showClose: true,\n\t            message: 'Your photo url is empty or invalid',\n\t            type: 'error'\n\t          });\n\t        }\n\t      } else {\n\t        if (!_lodash2.default.isEmpty(this.file.obj)) {\n\t          var storageRef = _vueFire.db.ref('deals-photos/' + this.file.url);\n\t          storageRef.put(this.file.obj).then(function (image) {\n\t            storageRef.getDownloadURL().then(function (url) {\n\t              var user = _vueFire2.default.auth().currentUser;\n\t              user.updateProfile({\n\t                photoURL: url\n\t              }).then(function () {\n\t                (0, _elementUi.Message)({\n\t                  showClose: true,\n\t                  message: 'Your Photo has been successfully updated.',\n\t                  type: 'success'\n\t                });\n\t                _this.$store.dispatch('setUser', user);\n\t                _this.$router.push({ name: 'UserProfile' });\n\t              }, function () {\n\t                (0, _elementUi.Message)({\n\t                  showClose: true,\n\t                  message: 'There was an error when trying to update your Photo.',\n\t                  type: 'error'\n\t                });\n\t              });\n\t            });\n\t          });\n\t        } else {\n\t          (0, _elementUi.Message)({\n\t            showClose: true,\n\t            message: 'The image file is empty or invalid.',\n\t            type: 'error'\n\t          });\n\t        }\n\t      }\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 626:\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(129)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"update-photo.vue\",\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ }),\n\n/***/ 664:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(626);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(130)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-25c18539!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./update-photo.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-25c18539!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./update-photo.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 716:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('el-dialog', {\n\t    attrs: {\n\t      \"size\": \"full\",\n\t      \"show-close\": false\n\t    },\n\t    on: {\n\t      \"close\": _vm.onClose\n\t    },\n\t    model: {\n\t      value: (_vm.dialogVisible),\n\t      callback: function($$v) {\n\t        _vm.dialogVisible = $$v\n\t      },\n\t      expression: \"dialogVisible\"\n\t    }\n\t  }, [_c('div', {\n\t    slot: \"title\"\n\t  }, [_c('div', {\n\t    staticClass: \"el-dialog__headerbtn\"\n\t  }, [_c('router-link', {\n\t    attrs: {\n\t      \"to\": {\n\t        name: 'UserProfile'\n\t      }\n\t    }\n\t  }, [_c('i', {\n\t    staticClass: \"el-dialog__close el-icon el-icon-close\"\n\t  })])], 1)]), _vm._v(\" \"), _vm._t(\"default\", [_c('div', {\n\t    staticClass: \"container\",\n\t    staticStyle: {\n\t      \"padding-top\": \"125px\"\n\t    }\n\t  }, [_c('h3', [_vm._v(\"Update Avatar\")]), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"modal-body\"\n\t  }, [_c('div', {\n\t    staticClass: \"row nav-selector\"\n\t  }, [_c('ul', {\n\t    staticClass: \"nav nav-pills\"\n\t  }, [_c('li', {\n\t    staticClass: \"nav-item\"\n\t  }, [_c('a', {\n\t    staticClass: \"nav-link active\",\n\t    attrs: {\n\t      \"href\": \"#upload\",\n\t      \"data-toggle\": \"pill\"\n\t    },\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.setTab(0)\n\t      }\n\t    }\n\t  }, [_c('b', [_vm._v(\"Upload\")])])]), _vm._v(\" \"), _c('li', {\n\t    staticClass: \"nav-item\"\n\t  }, [_c('a', {\n\t    staticClass: \"nav-link\",\n\t    attrs: {\n\t      \"href\": \"#uploadURL\",\n\t      \"data-toggle\": \"pill\"\n\t    },\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.setTab(1)\n\t      }\n\t    }\n\t  }, [_c('b', [_vm._v(\"Image From URL\")])])])])]), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"tab-content\"\n\t  }, [_c('div', {\n\t    staticClass: \"tab-pane active\",\n\t    attrs: {\n\t      \"id\": \"upload\",\n\t      \"role\": \"tabpanel\"\n\t    }\n\t  }, [_c('div', {\n\t    staticClass: \"row user-row\"\n\t  }, [_c('el-input', {\n\t    attrs: {\n\t      \"placeholder\": \"Upload Your Photo\",\n\t      \"disabled\": \"\"\n\t    },\n\t    model: {\n\t      value: (_vm.file.url),\n\t      callback: function($$v) {\n\t        _vm.file.url = $$v\n\t      },\n\t      expression: \"file.url\"\n\t    }\n\t  }, [_c('template', {\n\t    slot: \"append\"\n\t  }, [_c('el-upload', {\n\t    staticClass: \"upload-demo\",\n\t    attrs: {\n\t      \"action\": \"\",\n\t      \"show-upload-list\": false,\n\t      \"multiple\": false,\n\t      \"before-upload\": _vm.onFileSelected\n\t    }\n\t  }, [_c('el-button', {\n\t    staticStyle: {\n\t      \"color\": \"#212121\"\n\t    },\n\t    attrs: {\n\t      \"size\": \"small\",\n\t      \"type\": \"primary\"\n\t    }\n\t  }, [_vm._v(\"Upload Files\")])], 1)], 1)], 2)], 1)]), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"tab-pane\",\n\t    attrs: {\n\t      \"id\": \"uploadURL\",\n\t      \"role\": \"tabpanel\"\n\t    }\n\t  }, [_c('div', {\n\t    staticClass: \"row user-row\"\n\t  }, [_c('el-input', {\n\t    attrs: {\n\t      \"placeholder\": \"https://www.\"\n\t    },\n\t    model: {\n\t      value: (_vm.imageUrl),\n\t      callback: function($$v) {\n\t        _vm.imageUrl = $$v\n\t      },\n\t      expression: \"imageUrl\"\n\t    }\n\t  })], 1)])])]), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"footer\",\n\t    staticStyle: {\n\t      \"margin-top\": \"20px\"\n\t    }\n\t  }, [_c('el-button', {\n\t    attrs: {\n\t      \"type\": \"primary \"\n\t    },\n\t    on: {\n\t      \"click\": _vm.uploadLocal\n\t    }\n\t  }, [_vm._v(\"Upload\")]), _vm._v(\" \"), _c('router-link', {\n\t    attrs: {\n\t      \"to\": {\n\t        name: 'UserProfile'\n\t      }\n\t    }\n\t  }, [_c('el-button', {\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.dialogVisible = false\n\t      }\n\t    }\n\t  }, [_vm._v(\"Cancel\")])], 1)], 1)])])], 2)\n\t},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/16.fe2f9f96ef986a06e743.js","\n/* styles */\nrequire(\"!!../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-25c18539!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./update-photo.vue\")\n\nvar Component = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./update-photo.vue\"),\n  /* template */\n  require(\"!!../../../../../node_modules/vue-loader/lib/template-compiler?id=data-v-25c18539!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./update-photo.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/profile/update-photo/update-photo.vue\n// module id = 329\n// module chunks = 16","<template>\r\n  <el-dialog v-model=\"dialogVisible\" size=\"full\" :show-close=\"false\" @close=\"onClose\">\r\n    <div slot=\"title\">\r\n      <div class=\"el-dialog__headerbtn\">\r\n        <router-link :to=\"{name: 'UserProfile'}\"><i class=\"el-dialog__close el-icon el-icon-close\"></i></router-link>\r\n      </div>\r\n    </div>\r\n    <slot>\r\n      <div class=\"container\" style=\"padding-top:125px;\">\r\n        <h3>Update Avatar</h3>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row nav-selector\">\r\n            <ul class=\"nav nav-pills\">\r\n              <li class=\"nav-item\">\r\n                <a class=\"nav-link active\" href=\"#upload\" data-toggle=\"pill\" @click=\"setTab(0)\"><b>Upload</b></a>\r\n              </li>\r\n              <li class=\"nav-item\">\r\n                <a class=\"nav-link\" href=\"#uploadURL\" data-toggle=\"pill\" @click=\"setTab(1)\"><b>Image From URL</b></a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"tab-content\">\r\n            <div class=\"tab-pane active\" id=\"upload\" role=\"tabpanel\">\r\n              <div class=\"row user-row\">\r\n                <el-input  placeholder=\"Upload Your Photo\" v-model=\"file.url\" disabled>\r\n                  <template slot=\"append\">\r\n                    <el-upload\r\n                      class=\"upload-demo\"\r\n                      action=\"\"\r\n                      :show-upload-list=\"false\"\r\n                      :multiple=\"false\"\r\n                      :before-upload=\"onFileSelected\">\r\n                      <el-button size=\"small\" type=\"primary\"  style=\"color:#212121;\">Upload Files</el-button>\r\n                    </el-upload>\r\n                  </template>\r\n                </el-input>\r\n              </div>\r\n            </div>\r\n            <div class=\"tab-pane\" id=\"uploadURL\" role=\"tabpanel\">\r\n              <div class=\"row user-row\">\r\n                <el-input placeholder=\"https://www.\" v-model=\"imageUrl\">\r\n                </el-input>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"footer\" style=\"margin-top:20px;\">\r\n          <el-button type=\"primary \"@click=\"uploadLocal\">Upload</el-button>\r\n          <router-link :to=\"{name: 'UserProfile'}\"><el-button @click=\"dialogVisible = false\">Cancel</el-button></router-link>\r\n        </div>\r\n      </div>\r\n    </slot>\r\n  </el-dialog>\r\n</template>\r\n<style>\r\n</style>\r\n<script>\r\n  import { db } from '../../../../firebase/vueFire'\r\n  import fireBase from '../../../../firebase/vueFire'\r\n  import { Message } from 'element-ui'\r\n  import _ from 'lodash'\r\n  export default {\r\n    data () {\r\n      return {\r\n        tab: 0,\r\n        dialogVisible: true,\r\n        imageUrl: '',\r\n        file: {\r\n          url: '',\r\n          obj: null\r\n        }\r\n      }\r\n    },\r\n    mounted () {\r\n      this.$ga.trackPage(this.$route.path)\r\n    },\r\n    methods: {\r\n      setTab (id) {\r\n        this.tab = id\r\n      },\r\n      onClose () {\r\n        this.file = {}\r\n        this.$router.push({name: 'UserProfile'})\r\n      },\r\n      onFileSelected (file) {\r\n        this.file.obj = file\r\n        this.file.url = file.name\r\n        return false\r\n      },\r\n      uploadLocal () {\r\n        if (this.tab) {\r\n          if (!_.isEmpty(this.imageUrl)) {\r\n            var user = fireBase.auth().currentUser\r\n            user.updateProfile({\r\n              photoURL: this.imageUrl\r\n            }).then(() => {\r\n              Message({\r\n                showClose: true,\r\n                message: 'Your Photo has been successfully updated.',\r\n                type: 'success'\r\n              })\r\n              this.$store.dispatch('setUser', user)\r\n              this.$router.push({\r\n                name: 'UserProfile'\r\n              })\r\n            }, () => {\r\n              Message({\r\n                showClose: true,\r\n                message: 'There was an error when trying to update your Photo.',\r\n                type: 'error'\r\n              })\r\n            })\r\n          } else {\r\n            Message({\r\n              showClose: true,\r\n              message: 'Your photo url is empty or invalid',\r\n              type: 'error'\r\n            })\r\n          }\r\n        } else {\r\n          if (!_.isEmpty(this.file.obj)) {\r\n            var storageRef = db.ref('deals-photos/' + this.file.url)\r\n            storageRef.put(this.file.obj).then((image) => {\r\n              storageRef.getDownloadURL().then((url) => {\r\n                var user = fireBase.auth().currentUser\r\n                user.updateProfile({\r\n                  photoURL: url\r\n                }).then(() => {\r\n                  Message({\r\n                    showClose: true,\r\n                    message: 'Your Photo has been successfully updated.',\r\n                    type: 'success'\r\n                  })\r\n                  this.$store.dispatch('setUser', user)\r\n                  this.$router.push({name: 'UserProfile'})\r\n                }, () => {\r\n                  Message({\r\n                    showClose: true,\r\n                    message: 'There was an error when trying to update your Photo.',\r\n                    type: 'error'\r\n                  })\r\n                })\r\n              })\r\n            })\r\n          } else {\r\n            Message({\r\n              showClose: true,\r\n              message: 'The image file is empty or invalid.',\r\n              type: 'error'\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// update-photo.vue?09974f9c","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"update-photo.vue\",\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-25c18539!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/user/profile/update-photo/update-photo.vue\n// module id = 626\n// module chunks = 16","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-25c18539!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./update-photo.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-25c18539!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./update-photo.vue\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?sourceMap!../../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-25c18539!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./update-photo.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-25c18539!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/user/profile/update-photo/update-photo.vue\n// module id = 664\n// module chunks = 16","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('el-dialog', {\n    attrs: {\n      \"size\": \"full\",\n      \"show-close\": false\n    },\n    on: {\n      \"close\": _vm.onClose\n    },\n    model: {\n      value: (_vm.dialogVisible),\n      callback: function($$v) {\n        _vm.dialogVisible = $$v\n      },\n      expression: \"dialogVisible\"\n    }\n  }, [_c('div', {\n    slot: \"title\"\n  }, [_c('div', {\n    staticClass: \"el-dialog__headerbtn\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'UserProfile'\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"el-dialog__close el-icon el-icon-close\"\n  })])], 1)]), _vm._v(\" \"), _vm._t(\"default\", [_c('div', {\n    staticClass: \"container\",\n    staticStyle: {\n      \"padding-top\": \"125px\"\n    }\n  }, [_c('h3', [_vm._v(\"Update Avatar\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-body\"\n  }, [_c('div', {\n    staticClass: \"row nav-selector\"\n  }, [_c('ul', {\n    staticClass: \"nav nav-pills\"\n  }, [_c('li', {\n    staticClass: \"nav-item\"\n  }, [_c('a', {\n    staticClass: \"nav-link active\",\n    attrs: {\n      \"href\": \"#upload\",\n      \"data-toggle\": \"pill\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.setTab(0)\n      }\n    }\n  }, [_c('b', [_vm._v(\"Upload\")])])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"nav-item\"\n  }, [_c('a', {\n    staticClass: \"nav-link\",\n    attrs: {\n      \"href\": \"#uploadURL\",\n      \"data-toggle\": \"pill\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.setTab(1)\n      }\n    }\n  }, [_c('b', [_vm._v(\"Image From URL\")])])])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"tab-content\"\n  }, [_c('div', {\n    staticClass: \"tab-pane active\",\n    attrs: {\n      \"id\": \"upload\",\n      \"role\": \"tabpanel\"\n    }\n  }, [_c('div', {\n    staticClass: \"row user-row\"\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"Upload Your Photo\",\n      \"disabled\": \"\"\n    },\n    model: {\n      value: (_vm.file.url),\n      callback: function($$v) {\n        _vm.file.url = $$v\n      },\n      expression: \"file.url\"\n    }\n  }, [_c('template', {\n    slot: \"append\"\n  }, [_c('el-upload', {\n    staticClass: \"upload-demo\",\n    attrs: {\n      \"action\": \"\",\n      \"show-upload-list\": false,\n      \"multiple\": false,\n      \"before-upload\": _vm.onFileSelected\n    }\n  }, [_c('el-button', {\n    staticStyle: {\n      \"color\": \"#212121\"\n    },\n    attrs: {\n      \"size\": \"small\",\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"Upload Files\")])], 1)], 1)], 2)], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"tab-pane\",\n    attrs: {\n      \"id\": \"uploadURL\",\n      \"role\": \"tabpanel\"\n    }\n  }, [_c('div', {\n    staticClass: \"row user-row\"\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"https://www.\"\n    },\n    model: {\n      value: (_vm.imageUrl),\n      callback: function($$v) {\n        _vm.imageUrl = $$v\n      },\n      expression: \"imageUrl\"\n    }\n  })], 1)])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"footer\",\n    staticStyle: {\n      \"margin-top\": \"20px\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary \"\n    },\n    on: {\n      \"click\": _vm.uploadLocal\n    }\n  }, [_vm._v(\"Upload\")]), _vm._v(\" \"), _c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'UserProfile'\n      }\n    }\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisible = false\n      }\n    }\n  }, [_vm._v(\"Cancel\")])], 1)], 1)])])], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-25c18539!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/user/profile/update-photo/update-photo.vue\n// module id = 716\n// module chunks = 16"],"sourceRoot":""}